<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5.dev">
<title>scarf-to-db User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="__code_scarf_to_db_user_guide_code"><code>scarf-to-db User Guide</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>August 12, 2016</strong><br>
<strong>Authors:</strong> <em>Pranav Mehendiratta, James A. Kupsch</em><br></p>
</div>
<div class="paragraph">
<p>This document describes scarf-to-db a program that uploads SCARF (SWAMP Common Assessment Result Format) results into a NoSQL database (MongoDB) or SQL databases (PostgreSQL, MySQL, MariaDB or SQLite3). Uploading SCARF results into any DBMS involves the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#appendix-a">Install the DBMS (see Appendix A)</a></p>
</li>
<li>
<p><a href="#appendix-b">Install Perl drivers (see Appendix B)</a></p>
</li>
<li>
<p><a href="#scarf-to-db-configuration">Configure scarf-to-db</a></p>
</li>
<li>
<p><a href="#database-table-creation-or-deletion-for-sql-databases">Create database tables (for SQL databases)</a></p>
</li>
<li>
<p><a href="#saving-the-scarf-results-into-a-database">Use scarf-to-db to add SCARF results to DBMS</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The rest of this document describes the above steps, the database schemas, and deleting SQL database tables.</p>
</div>
<div class="sect2">
<h3 id="scarf-to-db-configuration">1.1. <strong>scarf-to-db configuration</strong></h3>
<div class="paragraph">
<p>To operate, scarf-to-db requires configuration. The configuration can be set using the command line, or via configuration files. scarf-to-db supports two configuration files: <em>scarf-to-db.conf</em> for database configuration, and <em>scarf-to-db-auth.conf</em> for database credential data (the permissions of this file should be restricted as it contains sensitive information). The use of the configuration files is optional, but recommended.</p>
</div>
<div class="paragraph">
<p>The value for an option is determined by first one of these that sets the value: 1) command line options, 2) the <em>scarf-to-db-auth.conf</em> configuration file, 3) the <em>scarf-to-db.conf</em> file, and finally 4) built-in defaults.</p>
</div>
<div class="paragraph">
<p>The location of configuration files can be set from an option before the option file is processed. If the configuration file location is explicitly set, it is an error if the file does not exist, but if the value is the default value, the configuration file is skipped if not present.</p>
</div>
<div class="paragraph">
<p>The remainder of these sections describes each option and is grouped by the most appropriate place to set the option starting with the scarf-to-db.conf options, then scarf-to-db-auth.conf options, and finally options most appropriately passed as command line options.</p>
</div>
<div class="sect3">
<h4 id="scarf-to-db.conf">1.1.1. <strong>scarf-to-db.conf</strong></h4>
<div class="paragraph">
<p>The purpose of scarf-to-db.conf file is to configure the database, but other options can also be specified in this file to set their default values. The database related settings that can be configured using this file are as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-type=&lt;type&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database type - It can be any of the databases
supported, default: mongodb</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-host=&lt;host&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname of the DBMS server, default: localhost</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-port=&lt;port&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port on which the DBMS server listens on,<br>
default: 27017 (MongoDB), 5432 (PostgreSQL) or 3306 (MySQL, MariaDB)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-name=&lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the database in which you want to save scarf
results to.<br>
For eg: test, scarf, swamp. MongoDB and SQLite creates the
database if it does not already exists (For SQLite the path to the SQLite database file can be specified using this option). <strong>(REQUIRED)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-commits=&lt;max&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the number of records or documents to be
inserted atomically, default: 1500 (MongoDB) or INF (infinity) (SQL
databases)<br>
(<strong>Note:</strong> For MongoDB the amount of memory used depends on the value of
this option. If you notice high memory usage, try reducing the value of
this option. If you are using a value other than INF, partial data may
be visible to database readers, and will be permanent if scarf-to-db
is interrupted before completion.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auth-conf=&lt;path&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to <em>scarf-to-db-auth.conf</em> file described in the
next step (default location: current directory, default filename:
scarf-to-db-auth.conf)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>include-assess-report-file=&lt;value&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds the AssessmentReportFile name
for the given bug instance, if set to 1. If value is 0, null will be
inserted in the database (default: 0)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>include-buildid=&lt;value&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds BuildId for the given bug instance, if set
to 1. If value is 0, null will be inserted in the database (default: 0)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>include-instance-location=&lt;value&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds the InstanceLocation
information for the given bug instance, if set to 1. If value is 0, null
will be inserted in the database (default: 0)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="scarf-to-db-auth.conf">1.1.2. <strong>scarf-to-db-auth.conf</strong></h4>
<div class="paragraph">
<p>The purpose of scarf-to-db-auth.conf is to store database credential information if required by DBMS (New installation of MongoDB and SQLite does not require username or password). Since the information stored can compromise security if revealed, the file permission should be set accordingly so that only the owner can read the file. The database authentication related options configured in this file are as follows:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-username=&lt;username&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for DBMS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db-password=&lt;password&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for DBMS</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="command-line-options">1.1.3. <strong>Command line options</strong></h4>
<div class="paragraph">
<p>The command line options can be used to specify any of the previous configuration file options, plus options that would be unique to each run of scarf-to-db. Command line options start with <code>--</code> and have same name as in the configuration file. Values are specified as <code>--key=value</code> or <code>--key value</code>. Some of the frequently used options have single letter options which can also be used to specify values using <code>-single-letter-key value</code>. The <code>-single-letter-key</code> is mentioned with the option itself in the following table. The command line options are as follows:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You must specify exactly one of the following options: <code>--scarf</code>, <code>--create-tables</code> or <code>--delete-tables</code>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 32%;">
<col style="width: 68%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--scarf=&lt;path&gt;</code> or <code>-s &lt;path&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the SCARF results XML or JSON
(parsed_results.xml or parsed_results.json) file or parsed_results.conf
file<br>
(<strong>Note:</strong> When test is run on a package it produces two files
named, parsed_results.conf and parsed_results.tar.gz.
parsed_results.tar.gz file contains a file named, parsed_results.xml
file. One can specify the path to parsed_results.conf file and
scarf-to-db will automatically find the XML or JSON file or one can
untar the parsed_results.tar.gz and provide the path to XML or JSON file
using this option) <strong>(REQUIRED)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--conf=&lt;path&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to Config file containing database parameters
(default location: current directory, default filename:
scarf-to-db.conf)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--create-tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates tables for SQL databases and exits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--delete-tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deletes tables for SQL databases and exits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--just-print</code> or <code>-n</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints out the commands used for database
execution and exits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--verbose or -V</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inserts data into the database and prints out the
insert statements depending on the value of <code>--output-file</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--help</code> or <code>-h</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints out the help menu on the console and exits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--version</code> or <code>-v</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prints out the version of the program and exits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--test-auth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verifies the credential information provided in
<code>scarf-to-db-auth.conf</code> file for the given database type and database
name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--pkg-name=&lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the package that was assessed (default:
null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--pkg-version=&lt;version&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the package that was assessed
(default: null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--platform=&lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the platform on which the assessment was run
(default: null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--output-file=&lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Saves all the insert statement to the file
provided using this option, default: console window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--assess-id=&lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique id (for SQL databases) required when just
printing out the the insert statements</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="database-table-creation-or-deletion-for-sql-databases">1.2. <strong>Database table creation or deletion for SQL databases</strong></h3>
<div class="paragraph">
<p>SQL databases require tables to be created before importing SCARF data. However, MongoDB does not require any tables for storing data. scarf-to-db can be used to create or delete SQL database tables using the following command line options:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--create-tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates tables for SQL databases and exits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--delete-tables</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deletes tables for SQL databases and exits</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The schema for the SCARF tables can be found in the section <strong><a href="#database-schema">Database Schema</a></strong>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="saving-the-scarf-results-into-a-database">1.3. <strong>Saving the SCARF results into a database</strong></h3>
<div class="paragraph">
<p>To save the SCARF results into a database only the <code>--scarf</code> command line option is required, besides the database configuration. (Assuming you have the DBMS and appropriate perl drivers installed). You can also use <code>--verbose</code> or <code>--just-print</code> to view the output with or without executing the database statements.</p>
</div>
</div>
<div class="sect2">
<h3 id="example-commands-loading-scarf-into-a-mongodb-database">1.4. <strong>Example commands loading SCARF into a MongoDB database</strong></h3>
<div class="paragraph">
<p>Configure the <code>scarf-to-db.conf</code> and <code>scarf-to-db-auth.conf</code> files as mentioned in the previous sections. After configuring those files you should have content similar to the following configuration files:</p>
</div>
<div class="paragraph">
<p>scarf-to-db-auth.conf</p>
</div>
<div class="literalblock">
<div class="content">
<pre>db-username = user
db-password = password</pre>
</div>
</div>
<div class="paragraph">
<p>scarf-to-db.conf</p>
</div>
<div class="literalblock">
<div class="content">
<pre>db-type = mongodb
db-host = my-mongo.swamp.cs.wisc.edu
db-name = scarf
auth-conf = scarf-to-db-auth.conf</pre>
</div>
</div>
<div class="sect3">
<h4 id="execution-command">1.4.1. <strong>Execution command</strong></h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">bin/scarf-to-db --scarf=./parsed_results.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command saves SCARF data in the database and produces no output unless there are errors.</p>
</div>
<div id="if-you-use---verbose-or---just-print-with-any-database-data-will-be-displayed-as-shown-below" class="paragraph">
<p>If you use <code>--verbose</code> or <code>--just-print</code> with any database, data will be displayed as shown below:</p>
</div>
<div class="paragraph">
<p>For SQL databases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You will see similar insert statement only once per SCARF file</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">INSERT INTO assess (assessuuid, pkgshortname, pkgversion, tooltype, toolversion, plat) VALUES  ('138ad1cb-129e-4837-a376-eed3b2ed072f', null, null, 'clang-sa', 'clang version 3.7.0, null);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You will see insert statements similar to these per weakness</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">INSERT INTO methods VALUES  ('4', '1', '-1', null, null);
INSERT INTO locations VALUES  ('4', '1', '1', '1', 'lighttpd-1.4.33/src/lemon.c', '857', '857', '9', null, null);
INSERT INTO weaknesses VALUES  ('4', '1', 'Assigned value is garbage or undefined', 'Logic error', null, null, 'Assigned value is garbage or undefined', null, null, null, null, null, null, null);
INSERT INTO cwe VALUES  ('4', '1', null);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For MongoDB:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You will see an array of documents similar to the following document</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">{
    "BugId" : 1,
    "BugRank" : null,
    "plat" : null,
    "toolType" : "clang-sa",
    "Methods" : [
    ],
    "classname" : null,
    "toolVersion" : "clang version 3.7.0",
    "BugSeverity" : null,
    "Location" : [
	{
	    "LocationId" : 1,
	    "EndLine" : 857,
	    "StartLine" : 857,
	    "primary" : true,
	    "SourceFile" : "lighttpd-1.4.33/src/lemon.c",
	    "StartColumn" : 9
	}
    ],
    "BugMessage" : "Assigned value is garbage or undefined",
    "BugCode" : "Assigned value is garbage or undefined",
    "pkgShortName" : null,
    "pkgVersion" : null,
    "assessUuid" : "138ad1cb-129e-4837-a376-eed3b2ed072f",
    "BugGroup" : "Logic error",
    "BugResolutionMsg" : null,
    "BugCwe" : null,
    "InstanceLocation" : null,
    "AssessmentReportFile" : null,
    "BuildId" : null
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The above output can used to manually import data to any of the supported databases.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="database-schema">1.5. <strong>Database Schema</strong></h3>
<div id="mongodb" class="paragraph">
<p><strong>MongoDB</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>BugInstance</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">{
    "_id" : &lt;unique MongoDB generated id&gt;,
    "BugRank" : &lt;String&gt;,
    "plat" : &lt;String&gt;,
    "toolType" : &lt;String&gt;,
    "Methods" : [
	{
	    "MethodId" : &lt;int&gt;,
	    "name" : &lt;String&gt;,
	    "primary" : &lt;Boolean&gt;
	}
    ],
    "classname" : &lt;String&gt;,
    "toolVersion" : &lt;String&gt;,
    "BugSeverity" : &lt;String&gt;,
    "Location" : [
	{
	    "EndLine" : &lt;int&gt;,
	    "StartLine" : &lt;int&gt;,
	    "primary" : &lt;Boolean&gt;,
	    "LocationId" : &lt;int&gt;,
	    "SourceFile" : &lt;path-String&gt;,
	    "StartColumn" : &lt;int&gt;,
	    "EndColumn" : &lt;int&gt;,
	    "Explanation" : &lt;String&gt;
	}
    ],

    "BugMessage" : &lt;String&gt;,
    "BugCode" : &lt;String&gt;,
    "pkgShortName" : &lt;String&gt;,
    "BugId" : &lt;int&gt;,
    "pkgVersion" : &lt;String&gt;,
    "assessUuid" : &lt;uuid-String&gt;,
    "BugGroup" : &lt;String&gt;,
    "BugResolutionMsg" : &lt;String&gt;,
    "BugCwe" : [&lt;int&gt;],
    "InstanceLocation" : {
	"Xpath" : &lt;path-String&gt;,
	"LineNum" : {
	    "Start" : &lt;int&gt;,
	    "End" : &lt;int&gt;
	}
    },
    "AssessmentReportFile" : &lt;path-String&gt;,
    "BuildId" : &lt;int&gt;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Metric</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">{
    "_id" : &lt;unique MongoDB generated id&gt;,
    "SourceFile" : &lt;path-String&gt;,
    "Type" : &lt;String&gt;,
    "pkgVersion" : &lt;String&gt;,
    "assessUuid" : &lt;uuid-String&gt;,
    "toolType" : &lt;String&gt;,
    "toolVersion" : &lt;String&gt;,
    "Value" : &lt;String&gt;,
    "plat" : &lt;String&gt;,
    "pkgShortName" : &lt;String&gt;,
    "MetricId" : &lt;int&gt;,
    "Method" : &lt;String&gt;,
    "Class" : &lt;String&gt;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>If the package does not contain any BugInstance or Metric</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">{
    "_id" : &lt;unique MongoDB generated id&gt;,
    "pkgVersion" : &lt;String&gt;,
    "assessUuid" : &lt;uuid-String&gt;,
    "toolType" : &lt;String&gt;,
    "toolVersion" : &lt;String&gt;,
    "plat" : &lt;String&gt;,
    "pkgShortName" : &lt;String&gt;
}</code></pre>
</div>
</div>
<div id="schema-sql-databases" class="paragraph">
<p><strong>Schema (SQL databases)</strong></p>
</div>
<div class="paragraph">
<p>Below is the schema for SQLite database. All other SQL databases have same schema with few minor changes for primary key. But, the column names and types is same for all SQL databases.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">CREATE TABLE assess (
    assessId         integer PRIMARY KEY AUTOINCREMENT,
    assessUuid       text       NOT NULL,
    pkgShortName     text,
    pkgVersion       text,
    toolType         text       NOT NULL,
    toolVersion      text,
    plat             text
);

CREATE TABLE locations (
    assessId         integer    NOT NULL,
    bugId            integer    NOT NULL,
    locId            integer    NOT NULL,
    isPrimary        boolean    NOT NULL,
    sourceFile       text       NOT NULL,
    startLine        integer,
    endLine          integer,
    startCol         integer,
    endCol           integer,
    explanation      text,
    PRIMARY KEY (assessId, bugId, locId)
);

CREATE TABLE functions (
    assessId         integer    NOT NULL,
    sourceFile       text,
    class            text,
    method           text,
    startLine        integer,
    endLine          integer
);

CREATE TABLE weaknesses (
    assessId         integer    NOT NULL,
    bugId            integer    NOT NULL,
    bugCode          text,
    bugGroup         text,
    bugRank          text,
    bugSeverity      text,
    bugMessage       text,
    bugResolutionMsg text,
    classname        text,
    AssessReportFile text,
    BuildId          integer,
    ILXpath          text,
    ILStart          integer,
    ILEnd            integer,
    PRIMARY KEY (assessId, bugId)
);

CREATE TABLE cwe (
    assessId         integer	NOT NULL,
    bugId            integer    NOT NULL,
    cwe              integer
);

CREATE TABLE methods (
    assessId         integer    NOT NULL,
    bugId            integer    NOT NULL,
    methodId         integer,
    isPrimary        boolean,
    methodName       text,
    PRIMARY KEY (assessId, bugId, methodId)
);

CREATE TABLE metrics (
    assessId         integer    NOT NULL,
    metricId         integer    NOT NULL,
    sourceFile       text,
    class            text,
    method           text,
    type             text,
    strVal           text,
    numVal           real,
    PRIMARY KEY (assessId, metricId)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="appendix-a">1.6. <strong>Appendix A: Database Installation</strong></h3>
<div class="sect3">
<h4 id="installing-mongodb">1.6.1. <strong>Installing MongoDB</strong></h4>
<div class="paragraph">
<p>To install MongoDB follow the installation guide at <a href="https://docs.mongodb.com/manual/installation/" class="bare">https://docs.mongodb.com/manual/installation/</a></p>
</div>
<div id="installing-mongodb-on-rhel-based-platforms" class="paragraph">
<p>Installing MongoDB on RHEL based platforms</p>
</div>
<div class="paragraph">
<p>For installation specific to RHEL based platforms please see <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/" class="bare">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
On <code>rhel-6.4-64</code> platform, executing <code>sudo yum install -y mongodb</code> will install an old version (2.4.14) of MongoDB. To install the latest version (3.2.8 or above) of MongoDB, please follow the steps in the section <strong>Configure the package management system (yum)</strong> in the tutorial <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/" class="bare">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/</a>. This program is tested on MongoDB version (2.4.14, 3.0.12, and 3.2.8) with perl MongoDB driver version (1.4.2, and 1.4.4).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example: To install <code>3.2.x</code> version of MongoDB on <code>rhel-6.4-64</code>:</p>
</div>
<div class="paragraph">
<p>Create a file named <code>/etc/yum.repos.d/mongodb-org-3.2.repo</code> and add the following content to the file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">[mongodb-org-3.2]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute the following shell command to install MongoDB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">% sudo yum install -y mongodb-org</code></pre>
</div>
</div>
<div id="check-if-the-mongodb-server-is-running" class="paragraph">
<p>Check if the MongoDB server is running</p>
</div>
<div class="paragraph">
<p>If the installation is successful, please execute the following command to check if the MongoDB server is running.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh"># Invokes Mongo Shell
% mongo</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the above command fails with a message <strong>exception: connect failed</strong> then, MongoDB may not be running.</p>
</div>
<div class="paragraph">
<p>Execute the following command to run MongoDB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">% sudo /etc/init.d/mongod start</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, MongoDB server listens on the network interface <code>localhost:27017</code>. There are various options to access MongoDB across the network. See the MongoDB documentation for more information <a href="https://docs.mongodb.com/manual/reference/configuration-options/" class="bare">https://docs.mongodb.com/manual/reference/configuration-options/</a>.</p>
</div>
<div id="authentication" class="paragraph">
<p>Authentication</p>
</div>
<div class="paragraph">
<p>By default, MongoDB allows any user that can connect to MongoDB to create databases and insert documents. To require authenticated users see <a href="https://docs.mongodb.com/manual/tutorial/enable-authentication/" class="bare">https://docs.mongodb.com/manual/tutorial/enable-authentication/</a>.</p>
</div>
<div class="paragraph">
<p>Note: If you notice any authentication related error messages and you are sure that password and username entered are correct, please check if the <code>authenticationDatabase</code> used for the user is same as the database that you are trying to access</p>
</div>
</div>
<div class="sect3">
<h4 id="installing-postgresql">1.6.2. <strong>Installing PostgreSQL</strong></h4>
<div class="paragraph">
<p>To install PostgreSQL follow the installation guide at <a href="https://www.postgresql.org/download/linux/redhat/" class="bare">https://www.postgresql.org/download/linux/redhat/</a></p>
</div>
</div>
<div class="sect3">
<h4 id="installing-mysql">1.6.3. <strong>Installing MySQL</strong></h4>
<div class="paragraph">
<p>To install MySQL follow the installation guide at <a href="https://dev.mysql.com/doc/mysql-repo-excerpt/5.6/en/linux-installation-yum-repo.html" class="bare">https://dev.mysql.com/doc/mysql-repo-excerpt/5.6/en/linux-installation-yum-repo.html</a></p>
</div>
</div>
<div class="sect3">
<h4 id="installing-mariadb">1.6.4. <strong>Installing MariaDB</strong></h4>
<div class="paragraph">
<p>To install MariaDB follow the installation guide at <a href="https://mariadb.com/kb/en/mariadb/yum/" class="bare">https://mariadb.com/kb/en/mariadb/yum/</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="appendix-b">1.7. <strong>Appendix B: Perl Drivers Installation</strong></h3>
<div class="sect3">
<h4 id="installing-perl-drivers">1.7.1. <strong>Installing Perl drivers</strong></h4>
<div class="paragraph">
<p>scarf-to-db program uses Perl drivers. Install the following Perl drivers on the machine that you would want to call scarf-to-db from</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>DBI</p>
</li>
<li>
<p>DBD::Pg</p>
</li>
<li>
<p>DBD::MySQL</p>
</li>
<li>
<p>DBD::SQLite</p>
</li>
<li>
<p>MongoDB</p>
</li>
<li>
<p>YAML</p>
</li>
<li>
<p>Config::AutoConf</p>
</li>
<li>
<p>JSON::MaybeXS</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On <code>rhel-6.4-64</code> platform, execute the following commands to install the drivers using CPAN</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sudo cpan DBI DBD::Pg MongoDB DBD::MySQL DBD::SQLite</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
On some RHEL machines, you may also need to install the <code>YAML and Config::AutoConf</code> packages from CPAN. To install the <code>YAML and Config::AutoConf</code> package, execute the following shell command:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">% sudo cpan YAML Config::AutoConf</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The above command may ask for user confirmation to install packages and its dependencies too many times. To avoid typing <code>yes</code> on the CPAN console too many time, use the following commands:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">% sudo perl -MCPAN -e shell  # Opens up a CPAN shell
    cpan[1]&gt; o conf prerequisites_policy follow
    cpan[2]&gt; o conf build_requires_install_policy yes
    cpan[3]&gt; o conf commit</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information on how to avoid the <code>yes</code> confirmation dialog please see <a href="https://major.io/2009/01/01/cpan-automatically-install-dependencies-without-confirmation/" class="bare">https://major.io/2009/01/01/cpan-automatically-install-dependencies-without-confirmation/</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Using the CPAN command to install perl MongoDB driver you can install latest version of the driver. This program is tested on versions (1.4.2, and 1.4.4(latest)).
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-08-16 15:31:04 CDT
</div>
</div>
</body>
</html>